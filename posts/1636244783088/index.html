<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <link
      rel="apple-touch-icon"
      sizes="57x57"
      href="/assets/favicon/apple-icon-57x57.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="60x60"
      href="/assets/favicon/apple-icon-60x60.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="72x72"
      href="/assets/favicon/apple-icon-72x72.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="76x76"
      href="/assets/favicon/apple-icon-76x76.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="114x114"
      href="/assets/favicon/apple-icon-114x114.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="120x120"
      href="/assets/favicon/apple-icon-120x120.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="144x144"
      href="/assets/favicon/apple-icon-144x144.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="152x152"
      href="/assets/favicon/apple-icon-152x152.png"
/>
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/favicon/apple-icon-180x180.png"
/>
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="/assets/favicon/android-icon-192x192.png"
/>
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="/assets/favicon/favicon-32x32.png"
/>
    <link
      rel="icon"
      type="image/png"
      sizes="96x96"
      href="/assets/favicon/favicon-96x96.png"
/>
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="/assets/favicon/favicon-16x16.png"
/>
    <link rel="manifest" href="/assets/favicon/manifest.json"/>
    <meta name="msapplication-TileColor" content="#ffffff"/>
    <meta name="msapplication-TileImage" content="/ms-icon-144x144.png"/>
    <meta name="theme-color" content="#ffffff"/>

    <!-- Apple Touch Icon (at least 200x200px) -->
    <link rel="apple-touch-icon" href="/custom-icon.png"/>

    <!-- To run web application in full-screen -->
    <meta name="apple-mobile-web-app-capable" content="yes"/>

    <!-- Status Bar Style (see Supported Meta Tags below for available values) -->
    <!-- Has no effect unless you have the previous meta tag -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black"/>

    <meta property="og:type" content="website"/>
    <meta property="og:url" content="https://www.chewhx.com/"/>
    <meta property="og:title" content="Chew Han Xiang | chewhx.com"/>
    <!-- <meta property="og:image" content="https://example.com/image.jpg"> -->
    <meta property="og:description" content="Description Here"/>
    <meta property="og:site_name" content="Website of Chew Han Xiang"/>
    <meta property="og:locale" content="en_US"/>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

    <!-- Dev Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.14.0/devicon.min.css"
    
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    <!-- Bootstrap Icons -->

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css"
/>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/styles.css"/>
    <link rel="stylesheet" href="/css/prism-syntax.css"/>

    <title>Chew Han Xiang | chewhx.com</title>
  </head>
  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light px-3">
  <div class="container">
    <a class="navbar-brand h3" href="/">
      chewhx.com
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
      <div class="navbar-nav ms-auto">
        
          <a class="nav-link" href="/#projects">Works</a>
        
          <a class="nav-link" href="/#devjournal">Journal</a>
        
          <a class="nav-link" href="/#connect">Connect</a>
        
      </div>
    </div>
  </div>
</nav>
    </header>
    <main>

      <div class="container text-align-right">
  <a href="/devjournal">
    <i class="bi bi-arrow-left" style="font-size: 2.5rem;"></i>
  </a>
  <h1>Stay curious</h1>
  <p>07/11/2021</p>
</div>
<article class="monospace">
  <h1>08:27:08</h1>
<p>A script to take screenshots of webpages, using puppeteer</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> urls <span class="token operator">=</span> <span class="token punctuation">[</span><br>  <span class="token string">"https://aliabdaal.com/"</span><span class="token punctuation">,</span><br>  <span class="token string">"https://oliur.com/"</span><span class="token punctuation">,</span><br>  <span class="token string">"https://github.com/chewhx?tab=repositories"</span><span class="token punctuation">,</span><br><span class="token punctuation">]</span><span class="token punctuation">;</span><br><br><span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span><span class="token string">"https://github.com/chewhx?tab=repositories"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br><span class="token keyword">const</span> <span class="token function-variable function">takeScreenshot</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token punctuation">,</span> fileName</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> browser <span class="token operator">=</span> <span class="token keyword">await</span> puppeteer<span class="token punctuation">.</span><span class="token function">launch</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>    headless<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    timeout<span class="token operator">:</span> <span class="token number">100000</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">const</span> page <span class="token operator">=</span> <span class="token keyword">await</span> browser<span class="token punctuation">.</span><span class="token function">newPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">goto</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span><br>    waitUntil<span class="token operator">:</span> <span class="token string">"networkidle2"</span><span class="token punctuation">,</span><br>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>  <span class="token keyword">await</span> page<span class="token punctuation">.</span><span class="token function">screenshot</span><span class="token punctuation">(</span><span class="token punctuation">{</span> path<span class="token operator">:</span> fileName<span class="token punctuation">,</span> fullPage<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>  browser<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>urls<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>  <span class="token keyword">const</span> <span class="token punctuation">{</span> hostname <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URL</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span><br>  <span class="token keyword">await</span> <span class="token function">takeScreenshot</span><span class="token punctuation">(</span>e<span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>dl<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>hostname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.png</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h1>09:28:22</h1>
<p>command lines to change mac shell to bash or zsh</p>
<pre class="language-bash"><code class="language-bash">$ chsh -s /bin/zsh<br>$ chsh -s /bin/bash</code></pre>
<h2>23:19:20</h2>
<p>Creating the cloud function to buy crypto on gemini exchange, on dollar cost averaging, took longer than I expected. I was stuck on creating a dynamic email template to send myself as notification, each time the cloud function executed.</p>
<p>I tried handlebars package, but went back to ejs because it supports javascript to manipulate the templated values.</p>
<p>A rough flow of this cloud function should be like this:</p>
<ol>
<li>On every 14th and 28th of the month</li>
<li>Get the current bid price of (coin/token)</li>
<li>Execute a immediate-or-cancel BUY order based on a regular amount of say, US$20.</li>
<li>Send myself and email notification for the order and available balances</li>
<li>If any errors, also send myself an email to notify so I can fix them.</li>
<li>It should be triggered by a http-request, bearing a unique param or query that &quot;authenticates&quot; this functions, otherwise anyone can trigger it.</li>
<li>I should include the coin or amount in the params/query, to avoid editing the function once it has been uploaded.</li>
</ol>

</article>

    </main>
    <footer>
  <div class="container text-center">
    <small>
      Built with <a href="https://www.11ty.dev">11ty</a>
    </small>
    <br/>
    <small>
      Hosted on <a href="https://pages.github.com">GitHub Page</a>
    </small>
  </div>
</footer>
  </body>

</html>